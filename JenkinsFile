pipeline{
    agent any
    environment{
        NEW_VERSION = '1.2.3'
    }
    stages{
        stage("Build"){
            steps{
                echo "Building the application with version ${NEW_VERSION}"
            }
        }
        
        stage("Test"){
            steps{
                when{
                    expression{ 
                        BRANCH_NAME = 'master'
                }
                steps{
                    echo "Testing the master branch"
                }
            }
        }
    }
}
}